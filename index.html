
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PlaySkratch v1.2</title>
  <link rel="icon" type="image/x-icon" href="skratch_favicon.ico">
  <style>
    body { font-family: Arial, sans-serif; background: #0A1F14; color: #fff; margin: 0; padding: 1rem; }
    h1 { text-align: center; color: #D72638; }
    .section { background: #111; padding: 1rem; margin-bottom: 1rem; border-radius: 8px; }
    .section h2 { color: #fff; font-size: 1.2rem; margin-bottom: 0.5rem; }
    label { display: block; margin-top: 0.5rem; }
    input, select, textarea { width: 100%; padding: 0.5rem; margin-top: 0.2rem; border-radius: 4px; border: none; }
    button { padding: 0.7rem 1.2rem; background: #D72638; color: white; border: none; border-radius: 5px; margin-top: 1rem; cursor: pointer; }
    .filter-btn { margin: 0.2rem; padding: 0.4rem 0.8rem; background: #333; color: white; border: 1px solid #555; border-radius: 4px; cursor: pointer; }
  </style>
  <script>
    function savePractice() {
      const date = document.getElementById('practiceDate').value;
      const type = document.getElementById('practiceType').value;
      const clubs = document.getElementById('practiceClubs').value;
      const notes = document.getElementById('practiceNotes').value;

      if (!date || !type || !clubs) {
        alert('Please fill in all required fields.');
        return;
      }

      const newSession = { date, type, clubs, notes };
      const practiceData = JSON.parse(localStorage.getItem('practice') || '[]');
      practiceData.push(newSession);
      localStorage.setItem('practice', JSON.stringify(practiceData));
      showPracticeSessions();
      alert('Practice logged!');
    }

    function showPracticeSessions(filter = '') {
      const container = document.getElementById('practiceHistory');
      container.innerHTML = '';
      const sessions = JSON.parse(localStorage.getItem('practice') || '[]');
      const filtered = filter ? sessions.filter(s => s.type === filter) : sessions;

      if (filtered.length === 0) {
        container.innerHTML = '<p>No practice sessions found.</p>';
        return;
      }

      filtered.reverse().forEach(session => {
        const entry = document.createElement('div');
        entry.innerHTML = `<strong>${session.date}</strong> – ${session.type}<br/>
                          Clubs: ${session.clubs}<br/>
                          Notes: ${session.notes || '–'}<hr/>`;
        container.appendChild(entry);
      });
    }

    function saveBag() {
      const bagInput = document.getElementById('bagInput').value;
      localStorage.setItem('bag', bagInput);
      alert('Bag saved!');
    }

    function showBag() {
      document.getElementById('bagInput').value = localStorage.getItem('bag') || '';
    }

    function downloadJSON() {
      const data = {
        rounds: JSON.parse(localStorage.getItem('rounds') || '[]'),
        practice: JSON.parse(localStorage.getItem('practice') || '[]'),
        bag: localStorage.getItem('bag') || '',
        fuel: JSON.parse(localStorage.getItem('fuel') || [])
      };
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = 'playskratch_data.json';
      link.click();
    }

    function importJSON(event) {
      const file = event.target.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        const content = JSON.parse(e.target.result);
        localStorage.setItem('rounds', JSON.stringify(content.rounds || []));
        localStorage.setItem('practice', JSON.stringify(content.practice || []));
        localStorage.setItem('bag', content.bag || '');
        localStorage.setItem('fuel', JSON.stringify(content.fuel || []));
        showBag();
        showPracticeSessions();
        alert('Data imported successfully!');
      };
      reader.readAsText(file);
    }

    window.onload = function() {
      showBag();
      showPracticeSessions();
    };
  </script>
</head>
<body>
  <h1>PlaySkratch v1.2</h1>

  <div class="section">
    <h2>Bag Setup</h2>
    <label>Your Bag (comma-separated)</label>
    <input id="bagInput" type="text" placeholder="e.g. PXG Driver, Cobra 4W, Nicklaus 7i..." />
    <button onclick="saveBag()">Save Bag</button>
  </div>

  <div class="section">
    <h2>Practice Log</h2>
    <label>Date</label>
    <input id="practiceDate" type="date" />
    <label>Type</label>
    <select id="practiceType">
      <option>Full Swing</option>
      <option>Short Game</option>
      <option>Putting</option>
      <option>Wedge Matrix</option>
    </select>
    <label>Clubs Used</label>
    <input id="practiceClubs" type="text" placeholder="e.g., 7i, 56°, Driver" />
    <label>Notes</label>
    <textarea id="practiceNotes"></textarea>
    <button onclick="savePractice()">Log Practice</button>
  </div>

  <div class="section">
    <h2>Practice History</h2>
    <div>
      <button class="filter-btn" onclick="showPracticeSessions()">All</button>
      <button class="filter-btn" onclick="showPracticeSessions('Full Swing')">Full Swing</button>
      <button class="filter-btn" onclick="showPracticeSessions('Short Game')">Short Game</button>
      <button class="filter-btn" onclick="showPracticeSessions('Putting')">Putting</button>
      <button class="filter-btn" onclick="showPracticeSessions('Wedge Matrix')">Wedge Matrix</button>
    </div>
    <div id="practiceHistory" style="margin-top: 1rem;"></div>
  </div>

  <div class="section">
    <h2>Data Management</h2>
    <button onclick="downloadJSON()">Download My Data (JSON)</button>
    <label for="importJson">Import Data</label>
    <input type="file" id="importJson" onchange="importJSON(event)" />
  </div>

</body>
</html>
